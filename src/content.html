<div class="article-entry" itemprop="articleBody">
  <h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2>
  <p>å¾ˆæ—©ä¹‹å‰å°±å…³æ³¨è¿‡dockerï¼Œçœ‹è¿‡æœ‰å…³çš„èµ„æ–™ï¼Œä½†æ˜¯é‚£æ—¶å€™dockerå¹¶ä¸æ”¯æŒwindowï¼Œä½¿ç”¨éœ€è¦ä½¿ç”¨ <code>docker toolbox</code>
    é‡‡ç”¨<code>VirtualBox</code>è™šæ‹Ÿæœºçš„æ–¹å¼æ¥å®‰è£…ï¼Œè§‰å¾—å¾ˆéº»çƒ¦ï¼Œå°±ä¸€ç›´æ²¡æœ‰å°è¯•ã€‚ </p>
  <p>æœ€è¿‘æ— æ„ä¸­å‘ç°<code>docker for window</code>å‘å¸ƒäº†ï¼Œå¯ä»¥åœ¨win10ä¸Šä½¿ç”¨ï¼Œè¶ç€æœ€è¿‘ä¸å¿™ï¼Œå€’è…¾ä¸€ä¸‹ã€‚<br><a id="more"></a></p>
  <h2 id="dockerå®‰è£…"><a href="#dockerå®‰è£…" class="headerlink" title="dockerå®‰è£…"></a>dockerå®‰è£…</h2>
  <p><code>docker for window</code> è·Ÿ <code>docker toolbox</code> ä¸åŒï¼Œ<code>docker for window</code>
    ä¾èµ–ä¸å¾®è½¯çš„è™šæ‹ŸåŒ–æŠ€æœ¯<code>Hyper V</code>ã€‚æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¦å¼€å¯win10çš„<code>Hyper V</code>:<br>é€šè¿‡æ§åˆ¶é¢æ¿çš„<code>ç¨‹åºå’ŒåŠŸèƒ½</code> -&gt;
    <code>å¯ç”¨å’Œå…³é—­Windows</code>åŠŸèƒ½æŸ¥çœ‹ Hyper V çŠ¶æ€ï¼š</p>
  <p><img src="//ohm2ny54m.qnssl.com/blog/20180928163323.jpg" alt="image"> </p>
  <p>å®‰è£…éå¸¸ç®€å•ï¼Œä¸‹è½½ <a href="https://note.youdao.com/" target="_blank" rel="noopener">docker for window</a> ä¸‹ä¸€æ­¥å®‰è£…å°±OKäº† </p>
  <p>å®‰è£…å®Œæˆä»¥åæ‰§è¡Œ <code>docker version</code> æŸ¥çœ‹å®‰è£…ç»“æœ</p>
  <pre><span class="line"><span class="string">$</span> <span class="string">docker</span> <span class="string">version</span></span><br><span class="line"><span class="attr">Client:</span></span><br><span class="line"><span class="attr"> Version:</span>           <span class="number">18.06</span><span class="number">.1</span><span class="bullet">-ce</span></span><br><span class="line"> <span class="string">API</span> <span class="attr">version:</span>       <span class="number">1.38</span></span><br><span class="line"> <span class="string">Go</span> <span class="attr">version:</span>        <span class="string">go1.10.3</span></span><br><span class="line"> <span class="string">Git</span> <span class="attr">commit:</span>        <span class="string">e68fc7a</span></span><br><span class="line"><span class="attr"> Built:</span>             <span class="string">Tue</span> <span class="string">Aug</span> <span class="number">21</span> <span class="number">17</span><span class="string">:21:34</span> <span class="number">2018</span></span><br><span class="line"> <span class="string">OS/Arch:</span>           <span class="string">windows/amd64</span></span><br><span class="line"><span class="attr"> Experimental:</span>      <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Server:</span></span><br><span class="line"><span class="attr"> Engine:</span></span><br><span class="line"><span class="attr">  Version:</span>          <span class="number">18.06</span><span class="number">.1</span><span class="bullet">-ce</span></span><br><span class="line">  <span class="string">API</span> <span class="attr">version:</span>      <span class="number">1.38</span> <span class="string">(minimum</span> <span class="string">version</span> <span class="number">1.12</span><span class="string">)</span></span><br><span class="line">  <span class="string">Go</span> <span class="attr">version:</span>       <span class="string">go1.10.3</span></span><br><span class="line">  <span class="string">Git</span> <span class="attr">commit:</span>       <span class="string">e68fc7a</span></span><br><span class="line"><span class="attr">  Built:</span>            <span class="string">Tue</span> <span class="string">Aug</span> <span class="number">21</span> <span class="number">17</span><span class="string">:29:02</span> <span class="number">2018</span></span><br><span class="line">  <span class="string">OS/Arch:</span>          <span class="string">linux/amd64</span></span><br><span class="line"><span class="attr">  Experimental:</span>     <span class="literal">false</span></span><br></pre>

  <h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2>
  <p>è®°å½•ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼Œå…¶ä»–çš„å¯ä»¥æ‰§è¡Œ <code>docker --help</code> æŸ¥çœ‹</p>
  <pre><span class="line"><span class="comment">// ä¸‹è½½image</span></span><br><span class="line">docker pull ubuntu </span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥çœ‹å·²ä¸‹è½½image</span></span><br><span class="line">docker <span class="built_in">image</span> ls </span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤image</span></span><br><span class="line">docker <span class="built_in">image</span> rm &lt;imageName&gt;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿è¡Œ</span></span><br><span class="line">docker <span class="built_in">run</span> ubuntu --name ubuntu </span><br><span class="line"><span class="comment">// ä½¿ç”¨ubuntu image åˆ›å»ºä¸€ä¸ªcontainer å¹¶è®¾ç½®åå­—ä¸º ubuntu</span></span><br><span class="line"><span class="comment">// è¿è¡Œæ—¶ä¼šæ£€æµ‹ç³»ç»Ÿä¸­æœ‰æ²¡æœ‰è¯¥imageå¦‚æœæ²¡æœ‰ä¼šè‡ªåŠ¨è°ƒç”¨`docker pull unbutu`ä¸‹è½½</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹runå‚æ•°</span></span><br><span class="line">docker <span class="built_in">run</span> --help</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœæ­¢ubuntu</span></span><br><span class="line">docker <span class="built_in">stop</span> ubuntu  </span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›å…¥å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">attach</span> ubuntu</span><br></pre>

  <h2 id="é…ç½®vueå¼€å‘ç¯å¢ƒ"><a href="#é…ç½®vueå¼€å‘ç¯å¢ƒ" class="headerlink" title="é…ç½®vueå¼€å‘ç¯å¢ƒ"></a>é…ç½®vueå¼€å‘ç¯å¢ƒ</h2>
  <h4 id="1-æŸ¥çœ‹å¯ç”¨image"><a href="#1-æŸ¥çœ‹å¯ç”¨image" class="headerlink"
      title="1. æŸ¥çœ‹å¯ç”¨image"></a>1. æŸ¥çœ‹å¯ç”¨image</h4>
  <pre><code>![ebiven/vue-cli](//ohm2ny54m.qnssl.com/blog/20180928165947.jpg)

è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ [ebiven/vue-cli](https://hub.docker.com/r/ebiven/vue-cli/)  

&gt; å¦‚æœæ²¡æœ‰æ»¡è¶³è‡ªå·±éœ€æ±‚çš„imageï¼Œä¹Ÿå¯ä»¥è‡ªå·±åˆ¶ä½œï¼Œè¿™ä¸ªä¸‹æ¬¡å†è¯´
</code></pre>
  <h4 id="2-ä¸‹è½½-image"><a href="#2-ä¸‹è½½-image" class="headerlink" title="2. ä¸‹è½½ image"></a>2. ä¸‹è½½ image</h4>
  
  <pre><span class="line">docker pull ebiven/vue-<span class="keyword">cli</span></span><br></pre>

  <h4 id="3-é…ç½®å‘½ä»¤"><a href="#3-é…ç½®å‘½ä»¤" class="headerlink" title="3. é…ç½®å‘½ä»¤"></a>3. é…ç½®å‘½ä»¤</h4>
  ä¼—æ‰€å‘¨çŸ¥ï¼Œwindowä¸‹çš„å‘½ä»¤è¡Œå·¥å…·ä¸å¤ªå¥½ç”¨ï¼Œä¸ºäº†ä¾¿äºæ“ä½œï¼Œæˆ‘è¿™é‡Œä½¿ç”¨cmderä½œä¸ºå‘½ä»¤è¡Œå·¥å…·  imageè¯´æ˜æ–‡ä»¶ä¸­çš„å‘½ä»¤æ˜¯linuxä¸‹çš„å‘½ä»¤ï¼Œåœ¨windowä¸‹æ‰§è¡Œä¼šå‡ºé”™ï¼š

  <pre><span class="line">$ docker <span class="keyword">run</span><span class="bash"> -it --rm -v <span class="string">"<span class="variable">$PWD</span>"</span>:<span class="string">"<span class="variable">$PWD</span>"</span> -w <span class="string">"<span class="variable">$PWD</span>"</span>  -u <span class="string">"<span class="variable">$(id -u)</span>"</span> ebiven/vue-cli vue</span></span><br><span class="line"><span class="bash">docker: Error response from daemon: the working directory <span class="string">'$PWD'</span> is invalid, it needs to be an absolute path.</span></span><br><span class="line"><span class="bash">See <span class="string">'docker run --help'</span>.</span></span><br></pre>

  åœ¨windowä¸‹éœ€è¦ä½¿ç”¨ `%cd%` è¾“å‡ºå½“å‰ç›®å½•ï¼Œå¦‚ä¸‹ï¼š
  <pre><span class="line">docker run -it <span class="params">--rm</span> -v <span class="string">"%cd%"</span>:<span class="string">/code</span> -w <span class="string">/code</span> -p 8080<span class="function">:8080</span> ebiven/vue-cli vue</span><br><span class="line"><span class="string">//</span> -it: è¿›è¡Œäº¤äº’å¼æ“ä½œ</span><br><span class="line"><span class="string">//</span> <span class="params">--rm</span>ï¼šå…³é—­è¯¥ container ååˆ é™¤æ–‡ä»¶</span><br><span class="line"><span class="string">//</span> -v %<span class="keyword">cd</span>%:<span class="string">/code</span>: å°†æ‰§è¡Œå‘½ä»¤çš„ç›®å½•æ˜ å°„åˆ°containerçš„<span class="string">/code</span>ç›®å½•</span><br><span class="line"><span class="string">//</span> -w <span class="string">/code</span>: è®¾ç½®å‘½ä»¤æ‰§è¡Œç›®å½•ä¸º<span class="string">/code</span></span><br><span class="line"><span class="string">//</span> -p 8080<span class="function">:8080</span>ï¼šå°†æœ¬æœºçš„8080ç«¯å£æ˜ å°„ä¸ºcontainerçš„8080ç«¯å£</span><br></pre>
  
  æµ‹è¯•ä¸€ä¸‹ï¼š
  <pre><span class="line">$ docker run -it <span class="params">--rm</span> -v <span class="string">"%cd%"</span>:<span class="string">/code</span> -w <span class="string">/code</span> ebiven/vue-cli vue <span class="params">--version</span></span><br><span class="line">3.0.1</span><br></pre>
 

  æ‰§è¡ŒæˆåŠŸï¼
  
  æ–°å»ºä¸€ä¸ªé¡¹ç›®è¯•è¯•ï¼š
  <pre><span class="line">$ docker run -it <span class="comment">--rm -v "%cd%":/code -w /code ebiven/vue-cli vue create test</span></span><br><span class="line"></span><br><span class="line">Vue CLI v3.0.1</span><br><span class="line">? Please pick a preset: default (babel, eslint)</span><br><span class="line">? Pick the package manager to <span class="keyword">use</span> <span class="keyword">when</span> installing dependencies: Yarn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vue CLI v3<span class="number">.0</span><span class="number">.1</span></span><br><span class="line">âœ¨  Creating <span class="keyword">project</span> <span class="keyword">in</span> /code/test.</span><br><span class="line">âš™  Installing CLI plugins. This might take a while...</span><br><span class="line"></span><br><span class="line">yarn <span class="keyword">install</span> v1<span class="number">.9</span><span class="number">.2</span></span><br><span class="line">info <span class="keyword">No</span> lockfile found.</span><br><span class="line">[<span class="number">1</span>/<span class="number">4</span>] Resolving packages...</span><br><span class="line">[<span class="number">2</span>/<span class="number">4</span>] Fetching packages...</span><br><span class="line">[<span class="comment">--------------------------------------------------------------------------------------------------------------------------] 0/1041(node:23) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.</span></span><br><span class="line">info fsevents@<span class="number">1.2</span><span class="number">.4</span>: The platform <span class="string">"linux"</span> <span class="keyword">is</span> incompatible <span class="keyword">with</span> this module.</span><br><span class="line">info <span class="string">"fsevents@1.2.4"</span> <span class="keyword">is</span> an optional dependency <span class="keyword">and</span> <span class="keyword">failed</span> <span class="keyword">compatibility</span> check. <span class="keyword">Excluding</span> it <span class="keyword">from</span> installation.</span><br><span class="line">[<span class="number">3</span>/<span class="number">4</span>] Linking dependencies...</span><br><span class="line">[<span class="number">4</span>/<span class="number">4</span>] Building <span class="keyword">fresh</span> packages...</span><br><span class="line"><span class="keyword">success</span> Saved lockfile.</span><br><span class="line">info <span class="keyword">To</span> <span class="keyword">upgrade</span>, run the <span class="keyword">following</span> command:</span><br><span class="line">$ curl <span class="comment">--compressed -o- -L https://yarnpkg.com/install.sh | bash</span></span><br><span class="line">Done <span class="keyword">in</span> <span class="number">162.74</span>s.</span><br><span class="line">ğŸš€  Invoking generators...</span><br><span class="line">ğŸ“¦  Installing additional dependencies...</span><br><span class="line"></span><br><span class="line">yarn <span class="keyword">install</span> v1<span class="number">.9</span><span class="number">.2</span></span><br><span class="line">[<span class="number">1</span>/<span class="number">4</span>] Resolving packages...</span><br><span class="line">[<span class="number">2</span>/<span class="number">4</span>] Fetching packages...</span><br><span class="line">[<span class="comment">--------------------------------------------------------------------------------------------------------------------------] 0/1045(node:50) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.</span></span><br><span class="line">info fsevents@<span class="number">1.2</span><span class="number">.4</span>: The platform <span class="string">"linux"</span> <span class="keyword">is</span> incompatible <span class="keyword">with</span> this module.</span><br><span class="line">info <span class="string">"fsevents@1.2.4"</span> <span class="keyword">is</span> an optional dependency <span class="keyword">and</span> <span class="keyword">failed</span> <span class="keyword">compatibility</span> check. <span class="keyword">Excluding</span> it <span class="keyword">from</span> installation.</span><br><span class="line">[<span class="number">3</span>/<span class="number">4</span>] Linking dependencies...</span><br><span class="line">[<span class="number">4</span>/<span class="number">4</span>] Building <span class="keyword">fresh</span> packages...</span><br><span class="line"></span><br><span class="line"><span class="keyword">success</span> Saved lockfile.</span><br><span class="line">Done <span class="keyword">in</span> <span class="number">42.59</span>s.</span><br><span class="line">âš“  Running completion hooks...</span><br><span class="line"></span><br><span class="line">ğŸ“„  Generating README.md...</span><br><span class="line"></span><br><span class="line">ğŸ‰  Successfully created <span class="keyword">project</span> test.</span><br><span class="line">ğŸ‘‰  <span class="keyword">Get</span> started <span class="keyword">with</span> the <span class="keyword">following</span> commands:</span><br><span class="line"></span><br><span class="line"> $ cd <span class="keyword">test</span></span><br><span class="line"> $ yarn serve</span><br></pre>
  

  å®‰è£…æˆåŠŸï¼š

  ![å®‰è£…æˆåŠŸ](//ohm2ny54m.qnssl.com/blog/20180928174039.jpg)

  ä¸è¿‡ï¼Œä¸Šé¢çš„å‘½ä»¤ä¹Ÿå¤ªé•¿äº†ï¼Œç”¨èµ·æ¥éå¸¸ä¸æ–¹ä¾¿ï¼Œå¯ä»¥ä½¿ç”¨`cmder`çš„åˆ«ååŠŸèƒ½ï¼š

  ä½¿ç”¨`vscode`æ‰“å¼€cmderç›®å½•ä¸‹çš„`config`æ–‡ä»¶å¤¹ä¸‹çš„`user-aliases.cmd`æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹:

  <pre><span class="line"><span class="attribute">node</span>=docker <span class="builtin-name">run</span> -it --rm -v <span class="string">"%cd%"</span>:/code -w /code ebiven/vue-cli node $*</span><br><span class="line"><span class="attribute">vue</span>=docker <span class="builtin-name">run</span> -it --rm -v <span class="string">"%cd%"</span>:/code -w /code -p 8080:8080 ebiven/vue-cli vue $*</span><br><span class="line"><span class="attribute">npm</span>=docker <span class="builtin-name">run</span> -it --rm -v <span class="string">"%cd%"</span>:/code -w /code ebiven/vue-cli npm $*</span><br><span class="line"><span class="attribute">yarn</span>=docker <span class="builtin-name">run</span> -it --rm -v <span class="string">"%cd%"</span>:/code -w /code -p 8080:8080 ebiven/vue-cli yarn $*</span><br><span class="line"><span class="attribute">ubuntu</span>=docker <span class="builtin-name">run</span> -it --rm -v <span class="string">"%cd%"</span>:/code -w /code ebiven/vue-cli bash</span><br></pre>
 

  æ‰§è¡Œä¸€ä¸‹ çœ‹çœ‹æ•ˆæœ

  <pre><span class="line">$ <span class="keyword">node</span> <span class="title">--version</span></span><br><span class="line">v10.<span class="number">9.0</span></span><br><span class="line"></span><br><span class="line">$ vue --<span class="keyword">version</span></span><br><span class="line"><span class="number">3.0</span>.<span class="number">1</span></span><br></pre>
 

  æå®šï¼å®Œå…¨çœ‹ä¸å‡ºæ¥æ˜¯åœ¨dockeré‡Œé¢æ‰§è¡Œçš„å‘½ä»¤ã€‚
  </code>
  </pre>
  <h4 id="4-ç›‘æ§æ–‡ä»¶ä¿®æ”¹"><a href="#4-ç›‘æ§æ–‡ä»¶ä¿®æ”¹" class="headerlink" title="4.  ç›‘æ§æ–‡ä»¶ä¿®æ”¹"></a>4. ç›‘æ§æ–‡ä»¶ä¿®æ”¹</h4>
  ç»è¿‡ä¸Šé¢çš„é…ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸»æœºä¸Šä½¿ç”¨å–œæ¬¢çš„ç¼–è¾‘å™¨ç¼–è¾‘ä»£ç ï¼Œé€šè¿‡dockeræ‰§è¡Œã€‚ä½†æ˜¯ä½¿ç”¨ `yarn serve` å‘½ä»¤è¿›è¡Œå¼€å‘æ—¶ï¼Œä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ç¼–è¾‘å™¨ä¸­ç¼–è¾‘æ–‡ä»¶åï¼Œdockeræ— æ³•ç›‘å¬åˆ°æ–‡ä»¶çš„ä¿®æ”¹ï¼Œä»è€Œé‡æ–°ç¼–è¯‘ã€åˆ·æ–°é¡µé¢ï¼›æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ webpack çš„è½®è¯¢åŠŸèƒ½è§£å†³ï¼š

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º`vue.config.js`æ–‡ä»¶:

    <pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line">module.exports = {</span><br><span class="line"><span class="symbol">    devServer:</span> {</span><br><span class="line"><span class="symbol">        watchOptions:</span> {</span><br><span class="line"><span class="symbol">            poll:</span> <span class="number">1000</span>  <span class="comment">//è®¾ç½®è½®è¯¢æ—¶é—´ä¸º1ç§’</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre>


  å†æ¬¡æ‰§è¡Œ`yarn serve`å³å¯ã€‚
 
  <h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2>
  <p>ç»è¿‡ä¸€å¤©çš„æŠ˜è…¾ï¼ŒåŸºæœ¬ä¸Šæ­å»ºå¥½äº†å¼€å‘ç¯å¢ƒï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ­£å¼å¼€å§‹å¼€å‘ï¼Œæ€»è§‰å¾—è¿˜æœ‰å¾ˆå¤šå‘åœ¨ç­‰ç€æˆ‘ï¼›è€Œä¸”ä½¿ç”¨dockerç¼–è¯‘vueé¡¹ç›®çš„é€Ÿåº¦æ€»è§‰å¾—è¿˜ä¸å¤ªæ»¡æ„ï¼Œä¼šä¸ä¼šé‡‡ç”¨è¿™ç§å¼€å‘æ–¹å¼ï¼Œè¿˜å¾—çœ‹ä»¥åçš„æµ‹è¯•ï¼Œæœ‰å…´è¶£çš„ä¹Ÿå¯ä»¥å°è¯•ä¸€ä¸‹ã€‚</p>
</div>